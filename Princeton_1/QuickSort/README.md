# Week3.2：QuickSort

## 基础快排实现

- 特性：
  - 原地排序
  - 不稳定排序
- 优化方式：
  - 较小的数组使用插入排序
  - 在进行切分之前，选择第一，最后，和中间三个数值中的中位数作为取样数
  - 将最大的数放在数组的最后面作为哨兵，避免右边界检查。
- 性能：
  - 快排平均下来有1.39NlogN次比较
  - 虽然快排比归并排序多39%的比较次数，但是由于归并排序里面有更多的元素移动，所以快排一般更快。

## 基于快排的选择算法

- 如何选择：选择一个数组中第k小的数
- 实现原理：
  - 利用切分算法对数组进行切分，只需要保留k在边界中的部分进行接下来的切分。

## 3路划分快排

- 解决问题：用于解决序列中有大量重复元素的情况。（在遇到相等元素不停下来的基础快排，时间复杂度会达到平方级）
- 实现原理：
  - 将数组分成3等分切分（小于，等于，大于），之后只需要对小于部分和大于部分进行递归排序即可。
  - 使用三个指针 （lt,gt,i）:
    - `lt`表示等于部分的最左边
    - `gt+1`表示大于部分的最左边
    - `i `表示当前遍历到的元素
  - 对于当前遍历元素的三种处理方式：
    - 小于：交换`lt`和`i`的元素，然后使`lt++，i++`
    - 大于：交换`i`和`gt`的元素，然后使`gt--`（因为之前gt位置的元素还没有判断所有，）
    - 等于：`i++`
  - 注意：已经遍历元素的个数是由`i 和 gt`决定的。

## 排序的应用

### 明显的应用：

- 列表根据名称排序
- 显示排名结果
- 倒序排序

### 使其他问题解决变得更加简单：

- 查找中位数
- 二分查找
- 查找重复的元素

### 不怎么明显的应用：

- 数据压缩
- 计算机图形学
- 计算生物学
- 并行计算机的负载均衡

### Java中的Arrays.sort()方法

- 对基本数据类型提供
- 对实现了Comparable接口的数据类型提供
- 可以使用Comparator
- 对基本数据类型使用快速排序，对对象使用归并排序。（因为对于基本数据类型，稳定性没有意义）